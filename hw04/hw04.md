# hw04

First I'll need to load the tidyverse and knitr packages:


```r
library(tidyverse)
```

```
## Loading tidyverse: ggplot2
## Loading tidyverse: tibble
## Loading tidyverse: tidyr
## Loading tidyverse: readr
## Loading tidyverse: purrr
## Loading tidyverse: dplyr
```

```
## Conflicts with tidy packages ----------------------------------------------
```

```
## filter(): dplyr, stats
## lag():    dplyr, stats
```

```r
library(knitr)
```


## Introducing my tasks for hw04

I have imported several data tables into my local environment, but want to create a new dataset to work with that will contain information from both. Specifically, I am interested in the various levels of off-farm paid work and on-farm capital in various Census Divisions (CD) in British Columbia (BC), particularly those with a high number of blueberry farms.

All of the data frames have values for each CD in BC, but they vary in their number of observations per CD (some have many as they are count data across various categories). All data frames have values for both 2011 and 2016. 

## 1. Re-shaping my data

I am going to perform a variation on Activity #2, using Stats Canada Agricultural Census Data instead of the Gapminder data. Note that I first need to save my newly imported dataset as an Rdata file (using ```save(Blueberry_Farms, file="Blueberry_Farms.RData")```), and then load it using the following chunk:


```r
load(file = "Blueberry_Farms.RData")
```


I need to do the same with the (1) Off-farm Work and (2) Total Farm Capital dataframes that I will use later on:


```r
load(file = "PaidNonFarmWork.RData")
load(file = "TotalFarmCapital.RData")
```



### 1.1 Using ```gather``` to make a longer dataframe

Currently, one of my dataframes has 2 variables (columns) for each year, and I'd like to re-shape it so that it has a single row per year (and one variable for number of "farms reporting blueberries").



```r
knitr::kable(Blueberry_Farms)
```



CD_Region                Unit                                     2011   2016
-----------------------  --------------------------------------  -----  -----
Capital                  Number of farms reporting blueberries     112    102
Cowichan Valley          Number of farms reporting blueberries      34     40
Nanaimo                  Number of farms reporting blueberries      33     42
Alberni-Clayoquot        Number of farms reporting blueberries       5      9
Strathcona               Number of farms reporting blueberries       8      7
Comox Valley             Number of farms reporting blueberries      34     43
Powell River             Number of farms reporting blueberries      18     15
Mount Waddington         Number of farms reporting blueberries       0      1
Central Coast            Number of farms reporting blueberries       2      2
Fraser Valley            Number of farms reporting blueberries     493    540
Greater Vancouver        Number of farms reporting blueberries     504    485
Sunshine Coast           Number of farms reporting blueberries       9     11
Squamish-Lillooet        Number of farms reporting blueberries       5      7
Okanagan-Similkameen     Number of farms reporting blueberries      12     30
Thompson-Nicola          Number of farms reporting blueberries       7     11
Central Okanagan         Number of farms reporting blueberries      19     25
North Okanagan           Number of farms reporting blueberries       7     14
Columbia-Shuswap         Number of farms reporting blueberries       6     12
East Kootenay            Number of farms reporting blueberries       1      0
Central Kootenay         Number of farms reporting blueberries      17     23
Kootenay Boundary        Number of farms reporting blueberries       5      3
Cariboo                  Number of farms reporting blueberries       4      8
Fraser-Fort George       Number of farms reporting blueberries       5      3
Skeena-Queen Charlotte   Number of farms reporting blueberries       0      1
Kitimat-Stikine          Number of farms reporting blueberries       4      3
Bulkley-Nechako          Number of farms reporting blueberries       4      4
Stikine                  Number of farms reporting blueberries       0      0
Peace River              Number of farms reporting blueberries       0      3
Northern Rockies         Number of farms reporting blueberries       0      0

To re-shape this, I'll use the ```gather``` function. I'll also name this new table "bf", arrange the observations by CD_Region, select for the Census Division name, year, and number of blueberry farms.   


```r
bf <- Blueberry_Farms %>%
  gather(key = "year", value = "blueberry_farms", "2011":"2016") %>%
  arrange(CD_Region) %>%
  select(CD_Region, year, blueberry_farms) 
  knitr::kable(bf)
```



CD_Region                year    blueberry_farms
-----------------------  -----  ----------------
Alberni-Clayoquot        2011                  5
Alberni-Clayoquot        2016                  9
Bulkley-Nechako          2011                  4
Bulkley-Nechako          2016                  4
Capital                  2011                112
Capital                  2016                102
Cariboo                  2011                  4
Cariboo                  2016                  8
Central Coast            2011                  2
Central Coast            2016                  2
Central Kootenay         2011                 17
Central Kootenay         2016                 23
Central Okanagan         2011                 19
Central Okanagan         2016                 25
Columbia-Shuswap         2011                  6
Columbia-Shuswap         2016                 12
Comox Valley             2011                 34
Comox Valley             2016                 43
Cowichan Valley          2011                 34
Cowichan Valley          2016                 40
East Kootenay            2011                  1
East Kootenay            2016                  0
Fraser Valley            2011                493
Fraser Valley            2016                540
Fraser-Fort George       2011                  5
Fraser-Fort George       2016                  3
Greater Vancouver        2011                504
Greater Vancouver        2016                485
Kitimat-Stikine          2011                  4
Kitimat-Stikine          2016                  3
Kootenay Boundary        2011                  5
Kootenay Boundary        2016                  3
Mount Waddington         2011                  0
Mount Waddington         2016                  1
Nanaimo                  2011                 33
Nanaimo                  2016                 42
North Okanagan           2011                  7
North Okanagan           2016                 14
Northern Rockies         2011                  0
Northern Rockies         2016                  0
Okanagan-Similkameen     2011                 12
Okanagan-Similkameen     2016                 30
Peace River              2011                  0
Peace River              2016                  3
Powell River             2011                 18
Powell River             2016                 15
Skeena-Queen Charlotte   2011                  0
Skeena-Queen Charlotte   2016                  1
Squamish-Lillooet        2011                  5
Squamish-Lillooet        2016                  7
Stikine                  2011                  0
Stikine                  2016                  0
Strathcona               2011                  8
Strathcona               2016                  7
Sunshine Coast           2011                  9
Sunshine Coast           2016                 11
Thompson-Nicola          2011                  7
Thompson-Nicola          2016                 11

### 1.2 Make a plot comparing number of blueberry farms by region

While in the hw04 description activity 2 (re-shaping) involves plotting life expectancy in 2 countries to compare (using multiple years of data), here I only have 2 years of data, but am interested to compare multiple regions. Let's figure out which regions have the highest number of blueberry farms.


```r
bf %>% 
  arrange(blueberry_farms) # Need to integrate argument for descending order?
```

```
## # A tibble: 58 x 3
##                 CD_Region  year blueberry_farms
##                     <chr> <chr>           <dbl>
##  1          East Kootenay  2016               0
##  2       Mount Waddington  2011               0
##  3       Northern Rockies  2011               0
##  4       Northern Rockies  2016               0
##  5            Peace River  2011               0
##  6 Skeena-Queen Charlotte  2011               0
##  7                Stikine  2011               0
##  8                Stikine  2016               0
##  9          East Kootenay  2011               1
## 10       Mount Waddington  2016               1
## # ... with 48 more rows
```

```r
  knitr::kable(bf) # And figure out why when I add this the arrange function no longer works...
```



CD_Region                year    blueberry_farms
-----------------------  -----  ----------------
Alberni-Clayoquot        2011                  5
Alberni-Clayoquot        2016                  9
Bulkley-Nechako          2011                  4
Bulkley-Nechako          2016                  4
Capital                  2011                112
Capital                  2016                102
Cariboo                  2011                  4
Cariboo                  2016                  8
Central Coast            2011                  2
Central Coast            2016                  2
Central Kootenay         2011                 17
Central Kootenay         2016                 23
Central Okanagan         2011                 19
Central Okanagan         2016                 25
Columbia-Shuswap         2011                  6
Columbia-Shuswap         2016                 12
Comox Valley             2011                 34
Comox Valley             2016                 43
Cowichan Valley          2011                 34
Cowichan Valley          2016                 40
East Kootenay            2011                  1
East Kootenay            2016                  0
Fraser Valley            2011                493
Fraser Valley            2016                540
Fraser-Fort George       2011                  5
Fraser-Fort George       2016                  3
Greater Vancouver        2011                504
Greater Vancouver        2016                485
Kitimat-Stikine          2011                  4
Kitimat-Stikine          2016                  3
Kootenay Boundary        2011                  5
Kootenay Boundary        2016                  3
Mount Waddington         2011                  0
Mount Waddington         2016                  1
Nanaimo                  2011                 33
Nanaimo                  2016                 42
North Okanagan           2011                  7
North Okanagan           2016                 14
Northern Rockies         2011                  0
Northern Rockies         2016                  0
Okanagan-Similkameen     2011                 12
Okanagan-Similkameen     2016                 30
Peace River              2011                  0
Peace River              2016                  3
Powell River             2011                 18
Powell River             2016                 15
Skeena-Queen Charlotte   2011                  0
Skeena-Queen Charlotte   2016                  1
Squamish-Lillooet        2011                  5
Squamish-Lillooet        2016                  7
Stikine                  2011                  0
Stikine                  2016                  0
Strathcona               2011                  8
Strathcona               2016                  7
Sunshine Coast           2011                  9
Sunshine Coast           2016                 11
Thompson-Nicola          2011                  7
Thompson-Nicola          2016                 11



```r
bf %>%
  filter(CD_Region %in% c("Fraser Valley", "Greater Vancouver", "Capital", "Comox Valley")) %>%
  ggplot(aes(x = CD_Region, y = blueberry_farms)) +
  geom_col(aes(color=year), position = "dodge")
```

![](hw04_files/figure-html/unnamed-chunk-7-1.png)<!-- -->

It is interesting to see from this plot that the four Census Divisions with highest number of blueberry farms have shown different trends from 2011 and 2016 -- with the Fraser Valley and the Comox Valley showing an increase, and the Capital and Greater Vancouver regions showing a decrease. 

### 1.3 Preparing additional dataframes

I'd also like to take a look at the extent of paid off-farm work in various different CDs. The dataframe for 'PaidNonFarmWork' also has columns for year, so I will again use ```gather``` so that these two dataframes are in the same format.



```r
ofw <- PaidNonFarmWork %>%
  gather(key = "year", value = "number_operators", "2011":"2016") %>%
  arrange(CD_Region) %>%
  select(CD_Region, Avg_Hrs_OffFarmWork, year, number_operators) 
  knitr::kable(ofw)
```



CD_Region                Avg_Hrs_OffFarmWork   year    number_operators
-----------------------  --------------------  -----  -----------------
Alberni-Clayoquot        Total Operators       2011                 150
Alberni-Clayoquot        No off-farm work      2011                  65
Alberni-Clayoquot        less than 20 hours    2011                  15
Alberni-Clayoquot        20 - 29 hours         2011                  10
Alberni-Clayoquot        30 - 40 hours         2011                  20
Alberni-Clayoquot        more than 40 hours    2011                  25
Alberni-Clayoquot        Total Operators       2016                 145
Alberni-Clayoquot        No off-farm work      2016                  65
Alberni-Clayoquot        less than 20 hours    2016                  15
Alberni-Clayoquot        20 - 29 hours         2016                  10
Alberni-Clayoquot        30 - 40 hours         2016                  25
Alberni-Clayoquot        more than 40 hours    2016                  30
Bulkley-Nechako          Total Operators       2011                1300
Bulkley-Nechako          No off-farm work      2011                 515
Bulkley-Nechako          less than 20 hours    2011                 125
Bulkley-Nechako          20 - 29 hours         2011                 115
Bulkley-Nechako          30 - 40 hours         2011                 215
Bulkley-Nechako          more than 40 hours    2011                 330
Bulkley-Nechako          Total Operators       2016                1165
Bulkley-Nechako          No off-farm work      2016                 515
Bulkley-Nechako          less than 20 hours    2016                 130
Bulkley-Nechako          20 - 29 hours         2016                  90
Bulkley-Nechako          30 - 40 hours         2016                 160
Bulkley-Nechako          more than 40 hours    2016                 275
Capital                  Total Operators       2011                1660
Capital                  No off-farm work      2011                 725
Capital                  less than 20 hours    2011                 200
Capital                  20 - 29 hours         2011                 155
Capital                  30 - 40 hours         2011                 275
Capital                  more than 40 hours    2011                 305
Capital                  Total Operators       2016                1495
Capital                  No off-farm work      2016                 655
Capital                  less than 20 hours    2016                 180
Capital                  20 - 29 hours         2016                 130
Capital                  30 - 40 hours         2016                 280
Capital                  more than 40 hours    2016                 250
Cariboo                  Total Operators       2011                1705
Cariboo                  No off-farm work      2011                 845
Cariboo                  less than 20 hours    2011                 175
Cariboo                  20 - 29 hours         2011                 135
Cariboo                  30 - 40 hours         2011                 255
Cariboo                  more than 40 hours    2011                 300
Cariboo                  Total Operators       2016                1440
Cariboo                  No off-farm work      2016                 725
Cariboo                  less than 20 hours    2016                 135
Cariboo                  20 - 29 hours         2016                  95
Cariboo                  30 - 40 hours         2016                 245
Cariboo                  more than 40 hours    2016                 235
Central Coast            Total Operators       2011                  40
Central Coast            No off-farm work      2011                  15
Central Coast            less than 20 hours    2011                   5
Central Coast            20 - 29 hours         2011                   5
Central Coast            30 - 40 hours         2011                  10
Central Coast            more than 40 hours    2011                   5
Central Coast            Total Operators       2016                  25
Central Coast            No off-farm work      2016                  10
Central Coast            less than 20 hours    2016                   5
Central Coast            20 - 29 hours         2016                   5
Central Coast            30 - 40 hours         2016                   5
Central Coast            more than 40 hours    2016                   5
Central Kootenay         Total Operators       2011                 815
Central Kootenay         No off-farm work      2011                 405
Central Kootenay         less than 20 hours    2011                  95
Central Kootenay         20 - 29 hours         2011                  60
Central Kootenay         30 - 40 hours         2011                 145
Central Kootenay         more than 40 hours    2011                 110
Central Kootenay         Total Operators       2016                 790
Central Kootenay         No off-farm work      2016                 380
Central Kootenay         less than 20 hours    2016                 110
Central Kootenay         20 - 29 hours         2016                  45
Central Kootenay         30 - 40 hours         2016                 130
Central Kootenay         more than 40 hours    2016                 125
Central Okanagan         Total Operators       2011                1520
Central Okanagan         No off-farm work      2011                 725
Central Okanagan         less than 20 hours    2011                 130
Central Okanagan         20 - 29 hours         2011                 135
Central Okanagan         30 - 40 hours         2011                 230
Central Okanagan         more than 40 hours    2011                 310
Central Okanagan         Total Operators       2016                1300
Central Okanagan         No off-farm work      2016                 625
Central Okanagan         less than 20 hours    2016                 140
Central Okanagan         20 - 29 hours         2016                 105
Central Okanagan         30 - 40 hours         2016                 225
Central Okanagan         more than 40 hours    2016                 205
Columbia-Shuswap         Total Operators       2011                 940
Columbia-Shuswap         No off-farm work      2011                 455
Columbia-Shuswap         less than 20 hours    2011                  90
Columbia-Shuswap         20 - 29 hours         2011                  85
Columbia-Shuswap         30 - 40 hours         2011                 150
Columbia-Shuswap         more than 40 hours    2011                 170
Columbia-Shuswap         Total Operators       2016                 815
Columbia-Shuswap         No off-farm work      2016                 385
Columbia-Shuswap         less than 20 hours    2016                  85
Columbia-Shuswap         20 - 29 hours         2016                  80
Columbia-Shuswap         30 - 40 hours         2016                 135
Columbia-Shuswap         more than 40 hours    2016                 125
Comox Valley             Total Operators       2011                 670
Comox Valley             No off-farm work      2011                 315
Comox Valley             less than 20 hours    2011                  95
Comox Valley             20 - 29 hours         2011                  60
Comox Valley             30 - 40 hours         2011                  95
Comox Valley             more than 40 hours    2011                 110
Comox Valley             Total Operators       2016                 640
Comox Valley             No off-farm work      2016                 325
Comox Valley             less than 20 hours    2016                  65
Comox Valley             20 - 29 hours         2016                  55
Comox Valley             30 - 40 hours         2016                 105
Comox Valley             more than 40 hours    2016                  95
Cowichan Valley          Total Operators       2011                1045
Cowichan Valley          No off-farm work      2011                 490
Cowichan Valley          less than 20 hours    2011                 100
Cowichan Valley          20 - 29 hours         2011                  85
Cowichan Valley          30 - 40 hours         2011                 180
Cowichan Valley          more than 40 hours    2011                 205
Cowichan Valley          Total Operators       2016                 975
Cowichan Valley          No off-farm work      2016                 460
Cowichan Valley          less than 20 hours    2016                  90
Cowichan Valley          20 - 29 hours         2016                  85
Cowichan Valley          30 - 40 hours         2016                 160
Cowichan Valley          more than 40 hours    2016                 180
East Kootenay            Total Operators       2011                 605
East Kootenay            No off-farm work      2011                 260
East Kootenay            less than 20 hours    2011                  70
East Kootenay            20 - 29 hours         2011                  50
East Kootenay            30 - 40 hours         2011                 100
East Kootenay            more than 40 hours    2011                 135
East Kootenay            Total Operators       2016                 535
East Kootenay            No off-farm work      2016                 265
East Kootenay            less than 20 hours    2016                  45
East Kootenay            20 - 29 hours         2016                  30
East Kootenay            30 - 40 hours         2016                  90
East Kootenay            more than 40 hours    2016                 105
Fraser Valley            Total Operators       2011                4235
Fraser Valley            No off-farm work      2011                2100
Fraser Valley            less than 20 hours    2011                 380
Fraser Valley            20 - 29 hours         2011                 280
Fraser Valley            30 - 40 hours         2011                 685
Fraser Valley            more than 40 hours    2011                 800
Fraser Valley            Total Operators       2016                3915
Fraser Valley            No off-farm work      2016                1970
Fraser Valley            less than 20 hours    2016                 310
Fraser Valley            20 - 29 hours         2016                 245
Fraser Valley            30 - 40 hours         2016                 640
Fraser Valley            more than 40 hours    2016                 745
Fraser-Fort George       Total Operators       2011                 830
Fraser-Fort George       No off-farm work      2011                 355
Fraser-Fort George       less than 20 hours    2011                  95
Fraser-Fort George       20 - 29 hours         2011                  60
Fraser-Fort George       30 - 40 hours         2011                 130
Fraser-Fort George       more than 40 hours    2011                 190
Fraser-Fort George       Total Operators       2016                 760
Fraser-Fort George       No off-farm work      2016                 355
Fraser-Fort George       less than 20 hours    2016                  65
Fraser-Fort George       20 - 29 hours         2016                  45
Fraser-Fort George       30 - 40 hours         2016                 145
Fraser-Fort George       more than 40 hours    2016                 155
Greater Vancouver        Total Operators       2011                4220
Greater Vancouver        No off-farm work      2011                2120
Greater Vancouver        less than 20 hours    2011                 405
Greater Vancouver        20 - 29 hours         2011                 275
Greater Vancouver        30 - 40 hours         2011                 615
Greater Vancouver        more than 40 hours    2011                 810
Greater Vancouver        Total Operators       2016                3525
Greater Vancouver        No off-farm work      2016                1825
Greater Vancouver        less than 20 hours    2016                 315
Greater Vancouver        20 - 29 hours         2016                 220
Greater Vancouver        30 - 40 hours         2016                 565
Greater Vancouver        more than 40 hours    2016                 600
Kitimat-Stikine          Total Operators       2011                 155
Kitimat-Stikine          No off-farm work      2011                  65
Kitimat-Stikine          less than 20 hours    2011                  10
Kitimat-Stikine          20 - 29 hours         2011                   5
Kitimat-Stikine          30 - 40 hours         2011                  40
Kitimat-Stikine          more than 40 hours    2011                  30
Kitimat-Stikine          Total Operators       2016                 155
Kitimat-Stikine          No off-farm work      2016                  50
Kitimat-Stikine          less than 20 hours    2016                  15
Kitimat-Stikine          20 - 29 hours         2016                  15
Kitimat-Stikine          30 - 40 hours         2016                  35
Kitimat-Stikine          more than 40 hours    2016                  35
Kootenay Boundary        Total Operators       2011                 485
Kootenay Boundary        No off-farm work      2011                 255
Kootenay Boundary        less than 20 hours    2011                  60
Kootenay Boundary        20 - 29 hours         2011                  35
Kootenay Boundary        30 - 40 hours         2011                  55
Kootenay Boundary        more than 40 hours    2011                  75
Kootenay Boundary        Total Operators       2016                 405
Kootenay Boundary        No off-farm work      2016                 205
Kootenay Boundary        less than 20 hours    2016                  45
Kootenay Boundary        20 - 29 hours         2016                  40
Kootenay Boundary        30 - 40 hours         2016                  60
Kootenay Boundary        more than 40 hours    2016                  55
Mount Waddington         Total Operators       2011                   0
Mount Waddington         No off-farm work      2011                   0
Mount Waddington         less than 20 hours    2011                   0
Mount Waddington         20 - 29 hours         2011                   0
Mount Waddington         30 - 40 hours         2011                   0
Mount Waddington         more than 40 hours    2011                   0
Mount Waddington         Total Operators       2016                  15
Mount Waddington         No off-farm work      2016                  10
Mount Waddington         less than 20 hours    2016                   0
Mount Waddington         20 - 29 hours         2016                   0
Mount Waddington         30 - 40 hours         2016                   0
Mount Waddington         more than 40 hours    2016                   0
Nanaimo                  Total Operators       2011                 705
Nanaimo                  No off-farm work      2011                 290
Nanaimo                  less than 20 hours    2011                  85
Nanaimo                  20 - 29 hours         2011                  80
Nanaimo                  30 - 40 hours         2011                 145
Nanaimo                  more than 40 hours    2011                 120
Nanaimo                  Total Operators       2016                 685
Nanaimo                  No off-farm work      2016                 310
Nanaimo                  less than 20 hours    2016                  75
Nanaimo                  20 - 29 hours         2016                  60
Nanaimo                  30 - 40 hours         2016                 120
Nanaimo                  more than 40 hours    2016                 120
North Okanagan           Total Operators       2011                1770
North Okanagan           No off-farm work      2011                 900
North Okanagan           less than 20 hours    2011                 160
North Okanagan           20 - 29 hours         2011                 135
North Okanagan           30 - 40 hours         2011                 280
North Okanagan           more than 40 hours    2011                 295
North Okanagan           Total Operators       2016                1570
North Okanagan           No off-farm work      2016                 815
North Okanagan           less than 20 hours    2016                 140
North Okanagan           20 - 29 hours         2016                 110
North Okanagan           30 - 40 hours         2016                 250
North Okanagan           more than 40 hours    2016                 250
Northern Rockies         Total Operators       2011                  45
Northern Rockies         No off-farm work      2011                   5
Northern Rockies         less than 20 hours    2011                   5
Northern Rockies         20 - 29 hours         2011                  10
Northern Rockies         30 - 40 hours         2011                  15
Northern Rockies         more than 40 hours    2011                  15
Northern Rockies         Total Operators       2016                  35
Northern Rockies         No off-farm work      2016                  15
Northern Rockies         less than 20 hours    2016                   5
Northern Rockies         20 - 29 hours         2016                   5
Northern Rockies         30 - 40 hours         2016                   5
Northern Rockies         more than 40 hours    2016                  10
Okanagan-Similkameen     Total Operators       2011                2265
Okanagan-Similkameen     No off-farm work      2011                1215
Okanagan-Similkameen     less than 20 hours    2011                 225
Okanagan-Similkameen     20 - 29 hours         2011                 160
Okanagan-Similkameen     30 - 40 hours         2011                 325
Okanagan-Similkameen     more than 40 hours    2011                 340
Okanagan-Similkameen     Total Operators       2016                1880
Okanagan-Similkameen     No off-farm work      2016                1060
Okanagan-Similkameen     less than 20 hours    2016                 155
Okanagan-Similkameen     20 - 29 hours         2016                 120
Okanagan-Similkameen     30 - 40 hours         2016                 285
Okanagan-Similkameen     more than 40 hours    2016                 260
Peace River              Total Operators       2011                2285
Peace River              No off-farm work      2011                 960
Peace River              less than 20 hours    2011                 220
Peace River              20 - 29 hours         2011                 190
Peace River              30 - 40 hours         2011                 405
Peace River              more than 40 hours    2011                 530
Peace River              Total Operators       2016                1990
Peace River              No off-farm work      2016                 870
Peace River              less than 20 hours    2016                 220
Peace River              20 - 29 hours         2016                 155
Peace River              30 - 40 hours         2016                 320
Peace River              more than 40 hours    2016                 420
Powell River             Total Operators       2011                 140
Powell River             No off-farm work      2011                  60
Powell River             less than 20 hours    2011                  30
Powell River             20 - 29 hours         2011                  15
Powell River             30 - 40 hours         2011                  10
Powell River             more than 40 hours    2011                  25
Powell River             Total Operators       2016                 115
Powell River             No off-farm work      2016                  50
Powell River             less than 20 hours    2016                  25
Powell River             20 - 29 hours         2016                  10
Powell River             30 - 40 hours         2016                  15
Powell River             more than 40 hours    2016                  15
Skeena-Queen Charlotte   Total Operators       2011                  30
Skeena-Queen Charlotte   No off-farm work      2011                  20
Skeena-Queen Charlotte   less than 20 hours    2011                   0
Skeena-Queen Charlotte   20 - 29 hours         2011                   0
Skeena-Queen Charlotte   30 - 40 hours         2011                   5
Skeena-Queen Charlotte   more than 40 hours    2011                   0
Skeena-Queen Charlotte   Total Operators       2016                  20
Skeena-Queen Charlotte   No off-farm work      2016                   5
Skeena-Queen Charlotte   less than 20 hours    2016                   5
Skeena-Queen Charlotte   20 - 29 hours         2016                   0
Skeena-Queen Charlotte   30 - 40 hours         2016                  10
Skeena-Queen Charlotte   more than 40 hours    2016                   0
Squamish-Lillooet        Total Operators       2011                 210
Squamish-Lillooet        No off-farm work      2011                 105
Squamish-Lillooet        less than 20 hours    2011                  25
Squamish-Lillooet        20 - 29 hours         2011                  15
Squamish-Lillooet        30 - 40 hours         2011                  40
Squamish-Lillooet        more than 40 hours    2011                  35
Squamish-Lillooet        Total Operators       2016                 205
Squamish-Lillooet        No off-farm work      2016                  85
Squamish-Lillooet        less than 20 hours    2016                  25
Squamish-Lillooet        20 - 29 hours         2016                  20
Squamish-Lillooet        30 - 40 hours         2016                  30
Squamish-Lillooet        more than 40 hours    2016                  45
Stikine                  Total Operators       2011                   0
Stikine                  No off-farm work      2011                   0
Stikine                  less than 20 hours    2011                   0
Stikine                  20 - 29 hours         2011                   0
Stikine                  30 - 40 hours         2011                   0
Stikine                  more than 40 hours    2011                   0
Stikine                  Total Operators       2016                   0
Stikine                  No off-farm work      2016                   0
Stikine                  less than 20 hours    2016                   0
Stikine                  20 - 29 hours         2016                   0
Stikine                  30 - 40 hours         2016                   0
Stikine                  more than 40 hours    2016                   0
Strathcona               Total Operators       2011                 150
Strathcona               No off-farm work      2011                  70
Strathcona               less than 20 hours    2011                  20
Strathcona               20 - 29 hours         2011                  10
Strathcona               30 - 40 hours         2011                  20
Strathcona               more than 40 hours    2011                  35
Strathcona               Total Operators       2016                 125
Strathcona               No off-farm work      2016                  60
Strathcona               less than 20 hours    2016                  10
Strathcona               20 - 29 hours         2016                  15
Strathcona               30 - 40 hours         2016                  20
Strathcona               more than 40 hours    2016                  20
Sunshine Coast           Total Operators       2011                 130
Sunshine Coast           No off-farm work      2011                  50
Sunshine Coast           less than 20 hours    2011                  15
Sunshine Coast           20 - 29 hours         2011                  15
Sunshine Coast           30 - 40 hours         2011                  30
Sunshine Coast           more than 40 hours    2011                  30
Sunshine Coast           Total Operators       2016                 125
Sunshine Coast           No off-farm work      2016                  45
Sunshine Coast           less than 20 hours    2016                  25
Sunshine Coast           20 - 29 hours         2016                  10
Sunshine Coast           30 - 40 hours         2016                  30
Sunshine Coast           more than 40 hours    2016                  20
Thompson-Nicola          Total Operators       2011                1815
Thompson-Nicola          No off-farm work      2011                 815
Thompson-Nicola          less than 20 hours    2011                 200
Thompson-Nicola          20 - 29 hours         2011                 140
Thompson-Nicola          30 - 40 hours         2011                 290
Thompson-Nicola          more than 40 hours    2011                 380
Thompson-Nicola          Total Operators       2016                1580
Thompson-Nicola          No off-farm work      2016                 775
Thompson-Nicola          less than 20 hours    2016                 160
Thompson-Nicola          20 - 29 hours         2016                 100
Thompson-Nicola          30 - 40 hours         2016                 260
Thompson-Nicola          more than 40 hours    2016                 290

Now we have a row for each year of data, and I've defined this new dataframe 'ofw'. 

I'd like to define a single measure for each region to indicate the extent of off-farm work. I think that the proportion of farm operators that work 20+ hours a week off of the farm should be a good measure, so I have some additional re-shaping to do...

First, I am going to ```spread``` the data so that I can have the number of operators in each 'bin' as variables instead of observations, as I think it will be easier to work with once in that format. 

I also want to create a new variable for the proportion of farm operators in each region that work 20+ hours off the farm (PropOp_20).

-- how to sum [some] column values in a new variable???



```r
ofw_wide <- ofw %>%
  spread(Avg_Hrs_OffFarmWork, number_operators) ##add a mutate in here to sum 3 columns across the observation?
```






I'd also like to take a look at values of on-farm capital in various different CDs. The dataframe for 'Total On-farm Capital' also has columns for year, so I will once again use ```gather``` so that these two dataframes are in the same format.


```r
fc <- TotalFarmCapital %>%
  gather(key = "year", value = "number_farms", "2011":"2016") %>%
  arrange(CD_Region) %>%
  select(CD_Region, Farms_TotFarmCap, year, number_farms) 
  knitr::kable(fc)
```



CD_Region                Farms_TotFarmCap   year    number_farms
-----------------------  -----------------  -----  -------------
Alberni-Clayoquot        under 100          2011               2
Alberni-Clayoquot        100 - 199          2011               1
Alberni-Clayoquot        200 - 349          2011              12
Alberni-Clayoquot        350 - 499          2011              19
Alberni-Clayoquot        500 - 999          2011              27
Alberni-Clayoquot        1000 - 1499        2011              19
Alberni-Clayoquot        1500 - 1999        2011               4
Alberni-Clayoquot        2000 - 3499        2011               8
Alberni-Clayoquot        3500 over          2011               1
Alberni-Clayoquot        under 100          2016               1
Alberni-Clayoquot        100 - 199          2016               3
Alberni-Clayoquot        200 - 349          2016              20
Alberni-Clayoquot        350 - 499          2016              18
Alberni-Clayoquot        500 - 999          2016              24
Alberni-Clayoquot        1000 - 1499        2016              12
Alberni-Clayoquot        1500 - 1999        2016               2
Alberni-Clayoquot        2000 - 3499        2016              11
Alberni-Clayoquot        3500 over          2016               2
Bulkley-Nechako          under 100          2011              14
Bulkley-Nechako          100 - 199          2011              50
Bulkley-Nechako          200 - 349          2011             188
Bulkley-Nechako          350 - 499          2011             145
Bulkley-Nechako          500 - 999          2011             199
Bulkley-Nechako          1000 - 1499        2011             104
Bulkley-Nechako          1500 - 1999        2011              55
Bulkley-Nechako          2000 - 3499        2011              44
Bulkley-Nechako          3500 over          2011              41
Bulkley-Nechako          under 100          2016               9
Bulkley-Nechako          100 - 199          2016              35
Bulkley-Nechako          200 - 349          2016             104
Bulkley-Nechako          350 - 499          2016             113
Bulkley-Nechako          500 - 999          2016             228
Bulkley-Nechako          1000 - 1499        2016              88
Bulkley-Nechako          1500 - 1999        2016              50
Bulkley-Nechako          2000 - 3499        2016              62
Bulkley-Nechako          3500 over          2016              58
Capital                  under 100          2011              18
Capital                  100 - 199          2011              26
Capital                  200 - 349          2011              69
Capital                  350 - 499          2011              56
Capital                  500 - 999          2011             395
Capital                  1000 - 1499        2011             248
Capital                  1500 - 1999        2011              93
Capital                  2000 - 3499        2011             115
Capital                  3500 over          2011              73
Capital                  under 100          2016              52
Capital                  100 - 199          2016              39
Capital                  200 - 349          2016              54
Capital                  350 - 499          2016              79
Capital                  500 - 999          2016             291
Capital                  1000 - 1499        2016             207
Capital                  1500 - 1999        2016              99
Capital                  2000 - 3499        2016             122
Capital                  3500 over          2016              60
Cariboo                  under 100          2011              17
Cariboo                  100 - 199          2011              66
Cariboo                  200 - 349          2011             192
Cariboo                  350 - 499          2011             211
Cariboo                  500 - 999          2011             331
Cariboo                  1000 - 1499        2011             119
Cariboo                  1500 - 1999        2011              53
Cariboo                  2000 - 3499        2011              72
Cariboo                  3500 over          2011              62
Cariboo                  under 100          2016              13
Cariboo                  100 - 199          2016              40
Cariboo                  200 - 349          2016             130
Cariboo                  350 - 499          2016             150
Cariboo                  500 - 999          2016             270
Cariboo                  1000 - 1499        2016              96
Cariboo                  1500 - 1999        2016              59
Cariboo                  2000 - 3499        2016              70
Cariboo                  3500 over          2016              91
Central Coast            under 100          2011               2
Central Coast            100 - 199          2011               2
Central Coast            200 - 349          2011               5
Central Coast            350 - 499          2011               7
Central Coast            500 - 999          2011               5
Central Coast            1000 - 1499        2011               5
Central Coast            1500 - 1999        2011               1
Central Coast            2000 - 3499        2011               0
Central Coast            3500 over          2011               0
Central Coast            under 100          2016               1
Central Coast            100 - 199          2016               1
Central Coast            200 - 349          2016               9
Central Coast            350 - 499          2016               2
Central Coast            500 - 999          2016               4
Central Coast            1000 - 1499        2016               2
Central Coast            1500 - 1999        2016               0
Central Coast            2000 - 3499        2016               1
Central Coast            3500 over          2016               0
Central Kootenay         under 100          2011              17
Central Kootenay         100 - 199          2011              32
Central Kootenay         200 - 349          2011              92
Central Kootenay         350 - 499          2011             104
Central Kootenay         500 - 999          2011             190
Central Kootenay         1000 - 1499        2011              46
Central Kootenay         1500 - 1999        2011              21
Central Kootenay         2000 - 3499        2011              26
Central Kootenay         3500 over          2011              24
Central Kootenay         under 100          2016              22
Central Kootenay         100 - 199          2016              28
Central Kootenay         200 - 349          2016              82
Central Kootenay         350 - 499          2016              96
Central Kootenay         500 - 999          2016             178
Central Kootenay         1000 - 1499        2016              52
Central Kootenay         1500 - 1999        2016              26
Central Kootenay         2000 - 3499        2016              31
Central Kootenay         3500 over          2016              22
Central Okanagan         under 100          2011              14
Central Okanagan         100 - 199          2011              18
Central Okanagan         200 - 349          2011              64
Central Okanagan         350 - 499          2011              50
Central Okanagan         500 - 999          2011             318
Central Okanagan         1000 - 1499        2011             189
Central Okanagan         1500 - 1999        2011              86
Central Okanagan         2000 - 3499        2011             180
Central Okanagan         3500 over          2011             101
Central Okanagan         under 100          2016              26
Central Okanagan         100 - 199          2016              22
Central Okanagan         200 - 349          2016              43
Central Okanagan         350 - 499          2016              35
Central Okanagan         500 - 999          2016             217
Central Okanagan         1000 - 1499        2016             185
Central Okanagan         1500 - 1999        2016              93
Central Okanagan         2000 - 3499        2016             132
Central Okanagan         3500 over          2016             126
Columbia-Shuswap         under 100          2011               2
Columbia-Shuswap         100 - 199          2011              10
Columbia-Shuswap         200 - 349          2011              56
Columbia-Shuswap         350 - 499          2011              74
Columbia-Shuswap         500 - 999          2011             251
Columbia-Shuswap         1000 - 1499        2011              86
Columbia-Shuswap         1500 - 1999        2011              41
Columbia-Shuswap         2000 - 3499        2011              52
Columbia-Shuswap         3500 over          2011              44
Columbia-Shuswap         under 100          2016               8
Columbia-Shuswap         100 - 199          2016              20
Columbia-Shuswap         200 - 349          2016              41
Columbia-Shuswap         350 - 499          2016              62
Columbia-Shuswap         500 - 999          2016             219
Columbia-Shuswap         1000 - 1499        2016              66
Columbia-Shuswap         1500 - 1999        2016              35
Columbia-Shuswap         2000 - 3499        2016              45
Columbia-Shuswap         3500 over          2016              36
Comox Valley             under 100          2011               2
Comox Valley             100 - 199          2011              11
Comox Valley             200 - 349          2011              40
Comox Valley             350 - 499          2011              65
Comox Valley             500 - 999          2011             161
Comox Valley             1000 - 1499        2011              75
Comox Valley             1500 - 1999        2011              29
Comox Valley             2000 - 3499        2011              23
Comox Valley             3500 over          2011              26
Comox Valley             under 100          2016               9
Comox Valley             100 - 199          2016               5
Comox Valley             200 - 349          2016              35
Comox Valley             350 - 499          2016              63
Comox Valley             500 - 999          2016             160
Comox Valley             1000 - 1499        2016              68
Comox Valley             1500 - 1999        2016              20
Comox Valley             2000 - 3499        2016              33
Comox Valley             3500 over          2016              23
Cowichan Valley          under 100          2011               6
Cowichan Valley          100 - 199          2011              27
Cowichan Valley          200 - 349          2011              44
Cowichan Valley          350 - 499          2011              74
Cowichan Valley          500 - 999          2011             308
Cowichan Valley          1000 - 1499        2011             101
Cowichan Valley          1500 - 1999        2011              45
Cowichan Valley          2000 - 3499        2011              55
Cowichan Valley          3500 over          2011              25
Cowichan Valley          under 100          2016              13
Cowichan Valley          100 - 199          2016              19
Cowichan Valley          200 - 349          2016              60
Cowichan Valley          350 - 499          2016              60
Cowichan Valley          500 - 999          2016             266
Cowichan Valley          1000 - 1499        2016              86
Cowichan Valley          1500 - 1999        2016              59
Cowichan Valley          2000 - 3499        2016              41
Cowichan Valley          3500 over          2016              28
East Kootenay            under 100          2011               2
East Kootenay            100 - 199          2011               9
East Kootenay            200 - 349          2011              33
East Kootenay            350 - 499          2011              49
East Kootenay            500 - 999          2011             134
East Kootenay            1000 - 1499        2011              59
East Kootenay            1500 - 1999        2011              26
East Kootenay            2000 - 3499        2011              35
East Kootenay            3500 over          2011              49
East Kootenay            under 100          2016               7
East Kootenay            100 - 199          2016               8
East Kootenay            200 - 349          2016              24
East Kootenay            350 - 499          2016              37
East Kootenay            500 - 999          2016             132
East Kootenay            1000 - 1499        2016              48
East Kootenay            1500 - 1999        2016              24
East Kootenay            2000 - 3499        2016              31
East Kootenay            3500 over          2016              37
Fraser Valley            under 100          2011              22
Fraser Valley            100 - 199          2011              61
Fraser Valley            200 - 349          2011             110
Fraser Valley            350 - 499          2011             120
Fraser Valley            500 - 999          2011             735
Fraser Valley            1000 - 1499        2011             466
Fraser Valley            1500 - 1999        2011             282
Fraser Valley            2000 - 3499        2011             404
Fraser Valley            3500 over          2011             543
Fraser Valley            under 100          2016              61
Fraser Valley            100 - 199          2016              70
Fraser Valley            200 - 349          2016              81
Fraser Valley            350 - 499          2016              83
Fraser Valley            500 - 999          2016             504
Fraser Valley            1000 - 1499        2016             410
Fraser Valley            1500 - 1999        2016             296
Fraser Valley            2000 - 3499        2016             469
Fraser Valley            3500 over          2016             602
Fraser-Fort George       under 100          2011               6
Fraser-Fort George       100 - 199          2011              42
Fraser-Fort George       200 - 349          2011             114
Fraser-Fort George       350 - 499          2011             123
Fraser-Fort George       500 - 999          2011             170
Fraser-Fort George       1000 - 1499        2011              52
Fraser-Fort George       1500 - 1999        2011              14
Fraser-Fort George       2000 - 3499        2011              25
Fraser-Fort George       3500 over          2011              12
Fraser-Fort George       under 100          2016              10
Fraser-Fort George       100 - 199          2016              26
Fraser-Fort George       200 - 349          2016              83
Fraser-Fort George       350 - 499          2016              89
Fraser-Fort George       500 - 999          2016             149
Fraser-Fort George       1000 - 1499        2016              48
Fraser-Fort George       1500 - 1999        2016              30
Fraser-Fort George       2000 - 3499        2016              36
Fraser-Fort George       3500 over          2016              21
Greater Vancouver        under 100          2011              50
Greater Vancouver        100 - 199          2011              85
Greater Vancouver        200 - 349          2011             117
Greater Vancouver        350 - 499          2011              92
Greater Vancouver        500 - 999          2011             620
Greater Vancouver        1000 - 1499        2011             607
Greater Vancouver        1500 - 1999        2011             335
Greater Vancouver        2000 - 3499        2011             469
Greater Vancouver        3500 over          2011             446
Greater Vancouver        under 100          2016             107
Greater Vancouver        100 - 199          2016              76
Greater Vancouver        200 - 349          2016             103
Greater Vancouver        350 - 499          2016              55
Greater Vancouver        500 - 999          2016             305
Greater Vancouver        1000 - 1499        2016             391
Greater Vancouver        1500 - 1999        2016             309
Greater Vancouver        2000 - 3499        2016             523
Greater Vancouver        3500 over          2016             543
Kitimat-Stikine          under 100          2011               3
Kitimat-Stikine          100 - 199          2011              17
Kitimat-Stikine          200 - 349          2011              22
Kitimat-Stikine          350 - 499          2011              21
Kitimat-Stikine          500 - 999          2011              29
Kitimat-Stikine          1000 - 1499        2011               4
Kitimat-Stikine          1500 - 1999        2011               4
Kitimat-Stikine          2000 - 3499        2011               4
Kitimat-Stikine          3500 over          2011               2
Kitimat-Stikine          under 100          2016               6
Kitimat-Stikine          100 - 199          2016               4
Kitimat-Stikine          200 - 349          2016              18
Kitimat-Stikine          350 - 499          2016              21
Kitimat-Stikine          500 - 999          2016              27
Kitimat-Stikine          1000 - 1499        2016              15
Kitimat-Stikine          1500 - 1999        2016               2
Kitimat-Stikine          2000 - 3499        2016               4
Kitimat-Stikine          3500 over          2016               2
Kootenay Boundary        under 100          2011               5
Kootenay Boundary        100 - 199          2011              17
Kootenay Boundary        200 - 349          2011              41
Kootenay Boundary        350 - 499          2011              64
Kootenay Boundary        500 - 999          2011              97
Kootenay Boundary        1000 - 1499        2011              38
Kootenay Boundary        1500 - 1999        2011              21
Kootenay Boundary        2000 - 3499        2011              28
Kootenay Boundary        3500 over          2011              14
Kootenay Boundary        under 100          2016               4
Kootenay Boundary        100 - 199          2016              11
Kootenay Boundary        200 - 349          2016              26
Kootenay Boundary        350 - 499          2016              55
Kootenay Boundary        500 - 999          2016              97
Kootenay Boundary        1000 - 1499        2016              21
Kootenay Boundary        1500 - 1999        2016              19
Kootenay Boundary        2000 - 3499        2016              28
Kootenay Boundary        3500 over          2016              11
Mount Waddington         under 100          2011               0
Mount Waddington         100 - 199          2011               0
Mount Waddington         200 - 349          2011               0
Mount Waddington         350 - 499          2011               0
Mount Waddington         500 - 999          2011               0
Mount Waddington         1000 - 1499        2011               0
Mount Waddington         1500 - 1999        2011               0
Mount Waddington         2000 - 3499        2011               0
Mount Waddington         3500 over          2011               0
Mount Waddington         under 100          2016               1
Mount Waddington         100 - 199          2016               1
Mount Waddington         200 - 349          2016               1
Mount Waddington         350 - 499          2016               1
Mount Waddington         500 - 999          2016               3
Mount Waddington         1000 - 1499        2016               0
Mount Waddington         1500 - 1999        2016               1
Mount Waddington         2000 - 3499        2016               0
Mount Waddington         3500 over          2016               0
Nanaimo                  under 100          2011              14
Nanaimo                  100 - 199          2011              22
Nanaimo                  200 - 349          2011              42
Nanaimo                  350 - 499          2011              60
Nanaimo                  500 - 999          2011             206
Nanaimo                  1000 - 1499        2011              54
Nanaimo                  1500 - 1999        2011              33
Nanaimo                  2000 - 3499        2011              29
Nanaimo                  3500 over          2011              18
Nanaimo                  under 100          2016              20
Nanaimo                  100 - 199          2016              13
Nanaimo                  200 - 349          2016              37
Nanaimo                  350 - 499          2016              60
Nanaimo                  500 - 999          2016             174
Nanaimo                  1000 - 1499        2016              58
Nanaimo                  1500 - 1999        2016              31
Nanaimo                  2000 - 3499        2016              40
Nanaimo                  3500 over          2016              22
North Okanagan           under 100          2011               7
North Okanagan           100 - 199          2011              15
North Okanagan           200 - 349          2011              82
North Okanagan           350 - 499          2011             126
North Okanagan           500 - 999          2011             485
North Okanagan           1000 - 1499        2011             181
North Okanagan           1500 - 1999        2011              86
North Okanagan           2000 - 3499        2011             104
North Okanagan           3500 over          2011              81
North Okanagan           under 100          2016              19
North Okanagan           100 - 199          2016              20
North Okanagan           200 - 349          2016              73
North Okanagan           350 - 499          2016             118
North Okanagan           500 - 999          2016             388
North Okanagan           1000 - 1499        2016             154
North Okanagan           1500 - 1999        2016              77
North Okanagan           2000 - 3499        2016             111
North Okanagan           3500 over          2016              79
Northern Rockies         under 100          2011               2
Northern Rockies         100 - 199          2011               0
Northern Rockies         200 - 349          2011               4
Northern Rockies         350 - 499          2011               3
Northern Rockies         500 - 999          2011               8
Northern Rockies         1000 - 1499        2011               5
Northern Rockies         1500 - 1999        2011               3
Northern Rockies         2000 - 3499        2011               3
Northern Rockies         3500 over          2011               0
Northern Rockies         under 100          2016               1
Northern Rockies         100 - 199          2016               3
Northern Rockies         200 - 349          2016               2
Northern Rockies         350 - 499          2016               3
Northern Rockies         500 - 999          2016               4
Northern Rockies         1000 - 1499        2016               2
Northern Rockies         1500 - 1999        2016               2
Northern Rockies         2000 - 3499        2016               5
Northern Rockies         3500 over          2016               2
Okanagan-Similkameen     under 100          2011              19
Okanagan-Similkameen     100 - 199          2011              24
Okanagan-Similkameen     200 - 349          2011              65
Okanagan-Similkameen     350 - 499          2011             116
Okanagan-Similkameen     500 - 999          2011             468
Okanagan-Similkameen     1000 - 1499        2011             275
Okanagan-Similkameen     1500 - 1999        2011             185
Okanagan-Similkameen     2000 - 3499        2011             200
Okanagan-Similkameen     3500 over          2011             154
Okanagan-Similkameen     under 100          2016              15
Okanagan-Similkameen     100 - 199          2016              28
Okanagan-Similkameen     200 - 349          2016              69
Okanagan-Similkameen     350 - 499          2016              81
Okanagan-Similkameen     500 - 999          2016             367
Okanagan-Similkameen     1000 - 1499        2016             239
Okanagan-Similkameen     1500 - 1999        2016             127
Okanagan-Similkameen     2000 - 3499        2016             198
Okanagan-Similkameen     3500 over          2016             168
Peace River              under 100          2011              19
Peace River              100 - 199          2011              69
Peace River              200 - 349          2011             217
Peace River              350 - 499          2011             260
Peace River              500 - 999          2011             472
Peace River              1000 - 1499        2011             198
Peace River              1500 - 1999        2011              87
Peace River              2000 - 3499        2011             116
Peace River              3500 over          2011              94
Peace River              under 100          2016              21
Peace River              100 - 199          2016              32
Peace River              200 - 349          2016              85
Peace River              350 - 499          2016             162
Peace River              500 - 999          2016             362
Peace River              1000 - 1499        2016             213
Peace River              1500 - 1999        2016             102
Peace River              2000 - 3499        2016             165
Peace River              3500 over          2016             169
Powell River             under 100          2011               0
Powell River             100 - 199          2011               6
Powell River             200 - 349          2011              21
Powell River             350 - 499          2011              20
Powell River             500 - 999          2011              27
Powell River             1000 - 1499        2011               9
Powell River             1500 - 1999        2011               4
Powell River             2000 - 3499        2011               3
Powell River             3500 over          2011               4
Powell River             under 100          2016               6
Powell River             100 - 199          2016               5
Powell River             200 - 349          2016              24
Powell River             350 - 499          2016              11
Powell River             500 - 999          2016              21
Powell River             1000 - 1499        2016               8
Powell River             1500 - 1999        2016               0
Powell River             2000 - 3499        2016               3
Powell River             3500 over          2016               2
Skeena-Queen Charlotte   under 100          2011               1
Skeena-Queen Charlotte   100 - 199          2011               4
Skeena-Queen Charlotte   200 - 349          2011               6
Skeena-Queen Charlotte   350 - 499          2011               3
Skeena-Queen Charlotte   500 - 999          2011               3
Skeena-Queen Charlotte   1000 - 1499        2011               2
Skeena-Queen Charlotte   1500 - 1999        2011               0
Skeena-Queen Charlotte   2000 - 3499        2011               1
Skeena-Queen Charlotte   3500 over          2011               0
Skeena-Queen Charlotte   under 100          2016               3
Skeena-Queen Charlotte   100 - 199          2016               7
Skeena-Queen Charlotte   200 - 349          2016               3
Skeena-Queen Charlotte   350 - 499          2016               1
Skeena-Queen Charlotte   500 - 999          2016               1
Skeena-Queen Charlotte   1000 - 1499        2016               0
Skeena-Queen Charlotte   1500 - 1999        2016               0
Skeena-Queen Charlotte   2000 - 3499        2016               1
Skeena-Queen Charlotte   3500 over          2016               1
Squamish-Lillooet        under 100          2011               3
Squamish-Lillooet        100 - 199          2011               4
Squamish-Lillooet        200 - 349          2011              12
Squamish-Lillooet        350 - 499          2011               9
Squamish-Lillooet        500 - 999          2011              44
Squamish-Lillooet        1000 - 1499        2011              25
Squamish-Lillooet        1500 - 1999        2011              11
Squamish-Lillooet        2000 - 3499        2011              16
Squamish-Lillooet        3500 over          2011              16
Squamish-Lillooet        under 100          2016               3
Squamish-Lillooet        100 - 199          2016               8
Squamish-Lillooet        200 - 349          2016              16
Squamish-Lillooet        350 - 499          2016              11
Squamish-Lillooet        500 - 999          2016              39
Squamish-Lillooet        1000 - 1499        2016              17
Squamish-Lillooet        1500 - 1999        2016              10
Squamish-Lillooet        2000 - 3499        2016              17
Squamish-Lillooet        3500 over          2016              17
Stikine                  under 100          2011               0
Stikine                  100 - 199          2011               0
Stikine                  200 - 349          2011               0
Stikine                  350 - 499          2011               0
Stikine                  500 - 999          2011               0
Stikine                  1000 - 1499        2011               0
Stikine                  1500 - 1999        2011               0
Stikine                  2000 - 3499        2011               0
Stikine                  3500 over          2011               0
Stikine                  under 100          2016               0
Stikine                  100 - 199          2016               0
Stikine                  200 - 349          2016               0
Stikine                  350 - 499          2016               0
Stikine                  500 - 999          2016               0
Stikine                  1000 - 1499        2016               0
Stikine                  1500 - 1999        2016               0
Stikine                  2000 - 3499        2016               0
Stikine                  3500 over          2016               0
Strathcona               under 100          2011               7
Strathcona               100 - 199          2011               4
Strathcona               200 - 349          2011              13
Strathcona               350 - 499          2011              17
Strathcona               500 - 999          2011              33
Strathcona               1000 - 1499        2011              13
Strathcona               1500 - 1999        2011               2
Strathcona               2000 - 3499        2011               7
Strathcona               3500 over          2011               2
Strathcona               under 100          2016               7
Strathcona               100 - 199          2016               5
Strathcona               200 - 349          2016              10
Strathcona               350 - 499          2016              13
Strathcona               500 - 999          2016              23
Strathcona               1000 - 1499        2016               8
Strathcona               1500 - 1999        2016               5
Strathcona               2000 - 3499        2016               2
Strathcona               3500 over          2016               6
Sunshine Coast           under 100          2011               1
Sunshine Coast           100 - 199          2011               6
Sunshine Coast           200 - 349          2011               8
Sunshine Coast           350 - 499          2011              10
Sunshine Coast           500 - 999          2011              41
Sunshine Coast           1000 - 1499        2011              15
Sunshine Coast           1500 - 1999        2011               5
Sunshine Coast           2000 - 3499        2011               2
Sunshine Coast           3500 over          2011               1
Sunshine Coast           under 100          2016               5
Sunshine Coast           100 - 199          2016               3
Sunshine Coast           200 - 349          2016               6
Sunshine Coast           350 - 499          2016              10
Sunshine Coast           500 - 999          2016              46
Sunshine Coast           1000 - 1499        2016              10
Sunshine Coast           1500 - 1999        2016               6
Sunshine Coast           2000 - 3499        2016               3
Sunshine Coast           3500 over          2016               2
Thompson-Nicola          under 100          2011              13
Thompson-Nicola          100 - 199          2011              42
Thompson-Nicola          200 - 349          2011             103
Thompson-Nicola          350 - 499          2011             169
Thompson-Nicola          500 - 999          2011             413
Thompson-Nicola          1000 - 1499        2011             154
Thompson-Nicola          1500 - 1999        2011              72
Thompson-Nicola          2000 - 3499        2011             118
Thompson-Nicola          3500 over          2011              93
Thompson-Nicola          under 100          2016              14
Thompson-Nicola          100 - 199          2016              32
Thompson-Nicola          200 - 349          2016              90
Thompson-Nicola          350 - 499          2016             110
Thompson-Nicola          500 - 999          2016             325
Thompson-Nicola          1000 - 1499        2016             148
Thompson-Nicola          1500 - 1999        2016              71
Thompson-Nicola          2000 - 3499        2016             101
Thompson-Nicola          3500 over          2016             126

Now we have a row for each year of data, and I've defined this new dataframe 'fc'. However, I'd like to define a single measure for each region to indicate the level of farm capital in the region. I think that the proportion of farms in each region with 


## 2. Joining two dataframes

Now that I have re-shaped two dataframes, I will join them! Because I should have the same observations by region and year, I simply want to combine the columns/variables. As such, I will use the ```full_join``` function.


```r
Blue_off_farm <- left_join(ofw_wide, bf, by = "CD_Region", "year")
knitr::kable(Blue_off_farm)
```



CD_Region                year.x    20 - 29 hours   30 - 40 hours   less than 20 hours   more than 40 hours   No off-farm work   Total Operators  year.y    blueberry_farms
-----------------------  -------  --------------  --------------  -------------------  -------------------  -----------------  ----------------  -------  ----------------
Alberni-Clayoquot        2011                 10              20                   15                   25                 65               150  2011                    5
Alberni-Clayoquot        2011                 10              20                   15                   25                 65               150  2016                    9
Alberni-Clayoquot        2016                 10              25                   15                   30                 65               145  2011                    5
Alberni-Clayoquot        2016                 10              25                   15                   30                 65               145  2016                    9
Bulkley-Nechako          2011                115             215                  125                  330                515              1300  2011                    4
Bulkley-Nechako          2011                115             215                  125                  330                515              1300  2016                    4
Bulkley-Nechako          2016                 90             160                  130                  275                515              1165  2011                    4
Bulkley-Nechako          2016                 90             160                  130                  275                515              1165  2016                    4
Capital                  2011                155             275                  200                  305                725              1660  2011                  112
Capital                  2011                155             275                  200                  305                725              1660  2016                  102
Capital                  2016                130             280                  180                  250                655              1495  2011                  112
Capital                  2016                130             280                  180                  250                655              1495  2016                  102
Cariboo                  2011                135             255                  175                  300                845              1705  2011                    4
Cariboo                  2011                135             255                  175                  300                845              1705  2016                    8
Cariboo                  2016                 95             245                  135                  235                725              1440  2011                    4
Cariboo                  2016                 95             245                  135                  235                725              1440  2016                    8
Central Coast            2011                  5              10                    5                    5                 15                40  2011                    2
Central Coast            2011                  5              10                    5                    5                 15                40  2016                    2
Central Coast            2016                  5               5                    5                    5                 10                25  2011                    2
Central Coast            2016                  5               5                    5                    5                 10                25  2016                    2
Central Kootenay         2011                 60             145                   95                  110                405               815  2011                   17
Central Kootenay         2011                 60             145                   95                  110                405               815  2016                   23
Central Kootenay         2016                 45             130                  110                  125                380               790  2011                   17
Central Kootenay         2016                 45             130                  110                  125                380               790  2016                   23
Central Okanagan         2011                135             230                  130                  310                725              1520  2011                   19
Central Okanagan         2011                135             230                  130                  310                725              1520  2016                   25
Central Okanagan         2016                105             225                  140                  205                625              1300  2011                   19
Central Okanagan         2016                105             225                  140                  205                625              1300  2016                   25
Columbia-Shuswap         2011                 85             150                   90                  170                455               940  2011                    6
Columbia-Shuswap         2011                 85             150                   90                  170                455               940  2016                   12
Columbia-Shuswap         2016                 80             135                   85                  125                385               815  2011                    6
Columbia-Shuswap         2016                 80             135                   85                  125                385               815  2016                   12
Comox Valley             2011                 60              95                   95                  110                315               670  2011                   34
Comox Valley             2011                 60              95                   95                  110                315               670  2016                   43
Comox Valley             2016                 55             105                   65                   95                325               640  2011                   34
Comox Valley             2016                 55             105                   65                   95                325               640  2016                   43
Cowichan Valley          2011                 85             180                  100                  205                490              1045  2011                   34
Cowichan Valley          2011                 85             180                  100                  205                490              1045  2016                   40
Cowichan Valley          2016                 85             160                   90                  180                460               975  2011                   34
Cowichan Valley          2016                 85             160                   90                  180                460               975  2016                   40
East Kootenay            2011                 50             100                   70                  135                260               605  2011                    1
East Kootenay            2011                 50             100                   70                  135                260               605  2016                    0
East Kootenay            2016                 30              90                   45                  105                265               535  2011                    1
East Kootenay            2016                 30              90                   45                  105                265               535  2016                    0
Fraser Valley            2011                280             685                  380                  800               2100              4235  2011                  493
Fraser Valley            2011                280             685                  380                  800               2100              4235  2016                  540
Fraser Valley            2016                245             640                  310                  745               1970              3915  2011                  493
Fraser Valley            2016                245             640                  310                  745               1970              3915  2016                  540
Fraser-Fort George       2011                 60             130                   95                  190                355               830  2011                    5
Fraser-Fort George       2011                 60             130                   95                  190                355               830  2016                    3
Fraser-Fort George       2016                 45             145                   65                  155                355               760  2011                    5
Fraser-Fort George       2016                 45             145                   65                  155                355               760  2016                    3
Greater Vancouver        2011                275             615                  405                  810               2120              4220  2011                  504
Greater Vancouver        2011                275             615                  405                  810               2120              4220  2016                  485
Greater Vancouver        2016                220             565                  315                  600               1825              3525  2011                  504
Greater Vancouver        2016                220             565                  315                  600               1825              3525  2016                  485
Kitimat-Stikine          2011                  5              40                   10                   30                 65               155  2011                    4
Kitimat-Stikine          2011                  5              40                   10                   30                 65               155  2016                    3
Kitimat-Stikine          2016                 15              35                   15                   35                 50               155  2011                    4
Kitimat-Stikine          2016                 15              35                   15                   35                 50               155  2016                    3
Kootenay Boundary        2011                 35              55                   60                   75                255               485  2011                    5
Kootenay Boundary        2011                 35              55                   60                   75                255               485  2016                    3
Kootenay Boundary        2016                 40              60                   45                   55                205               405  2011                    5
Kootenay Boundary        2016                 40              60                   45                   55                205               405  2016                    3
Mount Waddington         2011                  0               0                    0                    0                  0                 0  2011                    0
Mount Waddington         2011                  0               0                    0                    0                  0                 0  2016                    1
Mount Waddington         2016                  0               0                    0                    0                 10                15  2011                    0
Mount Waddington         2016                  0               0                    0                    0                 10                15  2016                    1
Nanaimo                  2011                 80             145                   85                  120                290               705  2011                   33
Nanaimo                  2011                 80             145                   85                  120                290               705  2016                   42
Nanaimo                  2016                 60             120                   75                  120                310               685  2011                   33
Nanaimo                  2016                 60             120                   75                  120                310               685  2016                   42
North Okanagan           2011                135             280                  160                  295                900              1770  2011                    7
North Okanagan           2011                135             280                  160                  295                900              1770  2016                   14
North Okanagan           2016                110             250                  140                  250                815              1570  2011                    7
North Okanagan           2016                110             250                  140                  250                815              1570  2016                   14
Northern Rockies         2011                 10              15                    5                   15                  5                45  2011                    0
Northern Rockies         2011                 10              15                    5                   15                  5                45  2016                    0
Northern Rockies         2016                  5               5                    5                   10                 15                35  2011                    0
Northern Rockies         2016                  5               5                    5                   10                 15                35  2016                    0
Okanagan-Similkameen     2011                160             325                  225                  340               1215              2265  2011                   12
Okanagan-Similkameen     2011                160             325                  225                  340               1215              2265  2016                   30
Okanagan-Similkameen     2016                120             285                  155                  260               1060              1880  2011                   12
Okanagan-Similkameen     2016                120             285                  155                  260               1060              1880  2016                   30
Peace River              2011                190             405                  220                  530                960              2285  2011                    0
Peace River              2011                190             405                  220                  530                960              2285  2016                    3
Peace River              2016                155             320                  220                  420                870              1990  2011                    0
Peace River              2016                155             320                  220                  420                870              1990  2016                    3
Powell River             2011                 15              10                   30                   25                 60               140  2011                   18
Powell River             2011                 15              10                   30                   25                 60               140  2016                   15
Powell River             2016                 10              15                   25                   15                 50               115  2011                   18
Powell River             2016                 10              15                   25                   15                 50               115  2016                   15
Skeena-Queen Charlotte   2011                  0               5                    0                    0                 20                30  2011                    0
Skeena-Queen Charlotte   2011                  0               5                    0                    0                 20                30  2016                    1
Skeena-Queen Charlotte   2016                  0              10                    5                    0                  5                20  2011                    0
Skeena-Queen Charlotte   2016                  0              10                    5                    0                  5                20  2016                    1
Squamish-Lillooet        2011                 15              40                   25                   35                105               210  2011                    5
Squamish-Lillooet        2011                 15              40                   25                   35                105               210  2016                    7
Squamish-Lillooet        2016                 20              30                   25                   45                 85               205  2011                    5
Squamish-Lillooet        2016                 20              30                   25                   45                 85               205  2016                    7
Stikine                  2011                  0               0                    0                    0                  0                 0  2011                    0
Stikine                  2011                  0               0                    0                    0                  0                 0  2016                    0
Stikine                  2016                  0               0                    0                    0                  0                 0  2011                    0
Stikine                  2016                  0               0                    0                    0                  0                 0  2016                    0
Strathcona               2011                 10              20                   20                   35                 70               150  2011                    8
Strathcona               2011                 10              20                   20                   35                 70               150  2016                    7
Strathcona               2016                 15              20                   10                   20                 60               125  2011                    8
Strathcona               2016                 15              20                   10                   20                 60               125  2016                    7
Sunshine Coast           2011                 15              30                   15                   30                 50               130  2011                    9
Sunshine Coast           2011                 15              30                   15                   30                 50               130  2016                   11
Sunshine Coast           2016                 10              30                   25                   20                 45               125  2011                    9
Sunshine Coast           2016                 10              30                   25                   20                 45               125  2016                   11
Thompson-Nicola          2011                140             290                  200                  380                815              1815  2011                    7
Thompson-Nicola          2011                140             290                  200                  380                815              1815  2016                   11
Thompson-Nicola          2016                100             260                  160                  290                775              1580  2011                    7
Thompson-Nicola          2016                100             260                  160                  290                775              1580  2016                   11

Why am I getting duplicated values for each year? All 3 join functions come back with the same resut...


In order to test out a new join function, I'm going to try adding data about Total Farm Capital to this new Blueberry Farms and Off-farm Work dataframe. 

This dataframe is currently in the same format that the others were, with columns for years and different measures as row numbers. I am going to make a new dataframe with only values for 2016, and try combining these two to see what I get.

First, I'm going to drop the 2011 data from the Total Farm Capital dataframe

This is the code I tried to use but get an error:

TotFarmCap16 <- TotalFarmCapital %>%
  select(2016) %>%
knitr::kable(TotFarmCap16)
--> problem with numeric column/variable name?



Now I tried to set up piping to select for the one variable, "No off-farm work" (as a single measure that tells us about whether farm operators are able to sustain their business without off-farm income), but again I get an error message, presumably from the variable name having spaces. Can I fix with the rename function in dplyr? Or do I need to change it before importing the dataset (also easy..). This thread: https://stackoverflow.com/questions/21502465/replacement-for-rename-in-dplyr

Blue_off_farm %>%
  select(CD_Region, year, "No off-farm work", blueberry_farms)





This was pretty simple, so I'll also take a look at activity #3

## 3. Exploring ```Match``` and ```Merge```

match returns a vector of the positions of (first) matches of its first argument in its second.
